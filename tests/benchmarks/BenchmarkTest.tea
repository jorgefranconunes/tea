###########################################################################
#
# Copyright (c) 2001, 2002 PDM&FC, All Rights Reserved.
#
###########################################################################





define _testsList ()





###########################################################################
#
# 
#
###########################################################################

class BenchmarkTest (

    _description
    _codeBlock
    _runCount
)





###########################################################################
#
# 
#
###########################################################################

method BenchmarkTest constructor ( description codeBlock runCount ) {

    set! _description $description
    set! _codeBlock   $codeBlock
    set! _runCount    $runCount
}





###########################################################################
#
# 
#
###########################################################################

method BenchmarkTest getDescription () {

    is $_description
}





###########################################################################
#
# 
#
###########################################################################

method BenchmarkTest getCodeBlock () {

    is $_codeBlock
}





###########################################################################
#
# 
#
###########################################################################

method BenchmarkTest getRunCount () {

    is $_runCount
}





###########################################################################
#
# 
#
###########################################################################

method BenchmarkTest perform () {

    time $_codeBlock $_runCount
}





###########################################################################
#
# 
#
###########################################################################

global BenchmarkTest::add ( description codeBlock runCount ) {

    define test [new BenchmarkTest $description $codeBlock $runCount]

    append $test $_testsList
}





###########################################################################
#
# 
#
###########################################################################

global BenchmarkTest::perform () {

    foreach test $_testsList {
        $stdout printf "%4d - %s" [$test getRunCount] [$test getDescription]
	$stdout writeln
	$stdout writeln [$test perform] "ms"
	$stdout writeln
    }
}





###########################################################################
#
# 
#
###########################################################################

